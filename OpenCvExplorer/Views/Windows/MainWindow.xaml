<ui:FluentWindow x:Class="OpenCvExplorer.Views.Windows.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:local="clr-namespace:OpenCvExplorer.Views.Windows"
                 xmlns:pages="clr-namespace:OpenCvExplorer.Views.Pages"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
                 ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                 d:DataContext="{d:DesignInstance local:MainWindow, IsDesignTimeCreatable=True}"
                 d:DesignHeight="800" d:DesignWidth="1000"
                 Title="{DynamicResource ResourceKey=title}"
                 Width="1920" Height="1080"
                 ExtendsContentIntoTitleBar="True"
                 Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                 WindowBackdropType="Mica" WindowCornerPreference="Round" WindowStartupLocation="CenterScreen"
                 mc:Ignorable="d"
                 KeyUp="FluentWindow_KeyUp" SizeChanged="FluentWindow_SizeChanged">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="55*"/>
            <ColumnDefinition Width="403*"/>
            <ColumnDefinition Width="342*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ui:NavigationView
            x:Name="RootNavigation"
            Grid.Row="1"
            Padding="42,0,42,0"
            FrameMargin="0"
            IsBackButtonVisible="Visible"
            IsPaneToggleVisible="True"
            PaneDisplayMode="{Binding ViewModel.PaneDisplayMode, Mode=OneWay}" Grid.ColumnSpan="3"
            IsPaneOpen="{Binding ViewModel.IsPaneOpen, Mode=OneWay}"
            SelectionChanged="RootNavigation_SelectionChanged">
            <ui:NavigationView.Header>
                <TextBlock Margin="42,20,42,20" FontSize="24" Text="{Binding ViewModel.SelectedMenuItemContent}" FontWeight="SemiBold"/>
            </ui:NavigationView.Header>
            <ui:NavigationView.MenuItems>
                <ui:NavigationViewItem Content="{DynamicResource ResourceKey=image-tab-title}"
                                       Icon="{ui:SymbolIcon ImageEdit24}"
                                       TargetPageType="pages:ImagePage"/>
                <ui:NavigationViewItem Content="{DynamicResource ResourceKey=video-tab-title}"
                                       Icon="{ui:SymbolIcon Video24}"
                                       TargetPageType="pages:VideoPage"/>
            </ui:NavigationView.MenuItems>
            <ui:NavigationView.ContentOverlay>
                <Grid>
                    <ui:SnackbarPresenter x:Name="SnackbarPresenter" />
                </Grid>
            </ui:NavigationView.ContentOverlay>
            <ui:NavigationView.FooterMenuItems>
                <ui:NavigationViewItem Content="{DynamicResource ResourceKey=settings-tab-title}"
                                       Icon="{ui:SymbolIcon Settings24}"
                                       TargetPageType="pages:SettingsPage"/>
            </ui:NavigationView.FooterMenuItems>
        </ui:NavigationView>

        <ContentPresenter
            x:Name="RootContentDialog"
            Grid.Row="0"
            Grid.RowSpan="2" Grid.ColumnSpan="3" />

        <ui:TitleBar
            x:Name="TitleBar"
            Title="{DynamicResource ResourceKey=title}"
            CloseWindowByDoubleClickOnIcon="True" Grid.ColumnSpan="3" VerticalAlignment="Center">
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="pack://application:,,,/Assets/OpenCV-logo-256.png" />
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <ui:InfoBar Grid.Row="1" Grid.RowSpan="2" Grid.ColumnSpan="3" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,5,5"
                    Severity="{Binding ViewModel.ApplicationStatus.Severity}"
                    Title="{Binding ViewModel.ApplicationStatus.Title}"
                    Message="{Binding ViewModel.ApplicationStatus.Message}"
                    IsOpen="{Binding ViewModel.ApplicationStatus.IsOpen}" Height="90"/>


        <RichTextBox x:Name="OutputConsole" Grid.Row="1" Grid.ColumnSpan="3"
                     Background="#7F000000" FontFamily="Cascadia Mono, Consolas, Courier New, monospace"
                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                     HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
                     Visibility="{Binding ViewModel.LogConsoleVisibility}"
                     TextChanged="OutputConsole_TextChanged"/>
    </Grid>
</ui:FluentWindow>
